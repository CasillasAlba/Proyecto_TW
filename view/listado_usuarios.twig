{% extends 'inicio_logueado.twig' %}

{% block content %}
    <div class="filtro_usuarios">
        <form action="index.php" method="POST">
            <input type="text" placeholder="Buscar..." name="search">
            <!-- Falta de ordenacion por rango de edad -->-->
            <input type="checkbox" id="activo" name="activo" value="activo">
            <label for="activo">Activo</label>
            <input type="checkbox" id="inactivo" name="inactivo" value="inactivo">
            <label for="inactivo">Inactivo</label>
            <input type="checkbox" id="pendiente" name="pendiente" value="vacunas_pendientes">
            <label for="Activo">Vacunas Pendientes</label>
            <label for="VacunaXSemanasInput" class="form-label">Vacunarse en:</label>
            <input type="number" id="VacunaXSemanasInput" placeholder="Semanas" name="vacuna_x_semanas">
            <div>
                <button name="idFiltrado">Filtrar</button>
            </div>
        </form>
        
    </div>

    <table class="table">
        <thead class="table-success">
            <tr>
                <th>Foto de perfil</th>
                <th>Nombre</th>
                <th>Email</th>
                <th>Estado</th>
                {% if rol_user == "Admin" %}
                    <th>Editar</th>
                    <th>Borrar</th>
                {% elseif rol_user == "Sanitario" %}
                    <th>Ver cartilla</th>
                    <th>Editar cartilla</th>
                    <th>Vacunar</th>
                {% endif %}
            </tr>
        </thead>
        <tbody>
            <form action="index.php" method="POST">
                {% for usuario in usuarios %}
                    {% if usuario.Rol != "Admin" %}
                        <tr>
                            <td><img height="100px" width="100px" src="data:image;base64,{{usuario.Fotografia}}"/></td>
                            <td>{{usuario.Nombre}} {{usuario.Apellidos}}</td>
                            <td>{{usuario.Email}}</td>
                            <td>{{usuario.Estado}}</td>
                            {% if rol_user == "Admin" %}
                                <td><button class="btn btn-success" name="idEditarUser" value="{{usuario.DNI}}"><i class="bi-brush"></i></button></td>
                                <td><button class="btn btn-danger" name="idBorrarUser" value="{{usuario.DNI}}"><i class="bi-trash"></button></td>
                            {% elseif rol_user == "Sanitario" %}
                                <td><button class="form-button" name="idVerVacunacion" value="{{usuario.DNI}}">Ver Cartilla</button></td>
                                <td><button class="form-button" name="idEditarVacunacion" value="{{usuario.DNI}}">Modificar Cartilla</button></td>
                                <td><button class="form-button" name="idPonerVacuna" value="{{usuario.DNI}}">AÃ±adir Vacuna</button></td>
                            {% endif %}
                        </tr>
                    {% endif %}
                {% endfor %}
            </form>
        </tbody>
    </table>
 
    
{% endblock %}